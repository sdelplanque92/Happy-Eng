(()=>{"use strict";const e=window.wp.blocks,l=window.wp.blockEditor,t=window.wp.components,i=window.ReactJSXRuntime;(0,e.registerBlockType)("he/text-image-bullets",{edit:({attributes:e,setAttributes:a})=>{const{title:s,text:n,mediaId:r,mediaUrl:o,mediaAlt:c}=e,d=(0,l.useBlockProps)({className:"he-tib-editor"});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.InspectorControls,{children:(0,i.jsxs)(t.PanelBody,{title:"Image",children:[(0,i.jsx)(t.TextControl,{label:"Texte alternatif (alt)",value:c,onChange:e=>a({mediaAlt:e}),help:"Accessibilité & SEO."}),o?(0,i.jsx)(t.Button,{variant:"secondary",onClick:()=>a({mediaId:0,mediaUrl:"",mediaAlt:""}),children:"Retirer l’image"}):null]})}),(0,i.jsx)("section",{...d,children:(0,i.jsxs)("div",{className:"he-tib__container",children:[(0,i.jsx)(l.RichText,{tagName:"h2",className:"he-tib__title",placeholder:"Titre…",value:s,onChange:e=>a({title:e}),allowedFormats:[]}),(0,i.jsx)(l.RichText,{tagName:"p",className:"he-tib__text",placeholder:"Texte… (Entrée = retour à la ligne)",value:n,onChange:e=>a({text:e}),allowedFormats:["core/bold","core/italic","core/link"]}),(0,i.jsxs)("div",{className:"he-tib__row",children:[(0,i.jsx)("div",{className:"he-tib__left",children:(0,i.jsx)(l.MediaUploadCheck,{children:(0,i.jsx)(l.MediaUpload,{onSelect:e=>{a({mediaId:e?.id||0,mediaUrl:e?.url||"",mediaAlt:e?.alt||""})},allowedTypes:["image"],value:r,render:({open:e})=>(0,i.jsx)("div",{children:o?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{className:"he-tib__img",src:o,alt:c||""}),(0,i.jsx)("div",{style:{marginTop:8},children:(0,i.jsx)(t.Button,{variant:"primary",onClick:e,children:"Changer l’image"})})]}):(0,i.jsx)(t.Button,{variant:"primary",onClick:e,children:"Choisir une image"})})})})}),(0,i.jsx)("div",{className:"he-tib__right",children:(0,i.jsx)(l.InnerBlocks,{allowedBlocks:["he/bullet-list"],template:[["he/bullet-list"]],templateLock:"all"})})]})]})})]})},save:()=>(0,i.jsx)(l.InnerBlocks.Content,{})})})();