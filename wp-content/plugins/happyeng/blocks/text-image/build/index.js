(()=>{"use strict";const e=window.wp.blocks,i=window.wp.blockEditor,l=window.wp.components,t=window.ReactJSXRuntime;(0,e.registerBlockType)("he/text-image-composition",{edit:({attributes:e,setAttributes:a})=>{const{title:s,mediaId:n,mediaUrl:o,mediaAlt:r,text:c}=e,d=(0,i.useBlockProps)({className:"he-comp-editor"});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.InspectorControls,{children:(0,t.jsxs)(l.PanelBody,{title:"Réglages",children:[(0,t.jsx)(l.TextControl,{label:"Texte alternatif (alt)",value:r,onChange:e=>a({mediaAlt:e}),help:"Important pour l’accessibilité et le SEO."}),o?(0,t.jsx)(l.Button,{variant:"secondary",onClick:()=>a({mediaId:0,mediaUrl:"",mediaAlt:""}),children:"Retirer l’image"}):null]})}),(0,t.jsx)("section",{...d,children:(0,t.jsxs)("div",{className:"he-comp__container",children:[(0,t.jsx)(i.RichText,{tagName:"h2",className:"he-comp__title",placeholder:"Ton titre…",value:s,onChange:e=>a({title:e}),allowedFormats:[]}),(0,t.jsxs)("div",{className:"he-comp__row",children:[(0,t.jsx)("div",{className:"he-comp__text",children:(0,t.jsx)(i.RichText,{tagName:"div",multiline:"p",placeholder:"Ton texte…",value:c,onChange:e=>a({text:e}),allowedFormats:["core/bold","core/italic","core/link"]})}),(0,t.jsx)("div",{className:"he-comp__media",children:(0,t.jsx)(i.MediaUploadCheck,{children:(0,t.jsx)(i.MediaUpload,{onSelect:e=>{a({mediaId:e?.id||0,mediaUrl:e?.url||"",mediaAlt:e?.alt||""})},allowedTypes:["image"],value:n,render:({open:e})=>(0,t.jsx)("div",{children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{className:"he-comp__img",src:o,alt:r||""}),(0,t.jsx)("div",{style:{marginTop:8},children:(0,t.jsx)(l.Button,{variant:"primary",onClick:e,children:"Changer l’image"})})]}):(0,t.jsx)(l.Button,{variant:"primary",onClick:e,children:"Choisir une image"})})})})})]})]})})]})},save:()=>null})})();